package {{.PackageName}}

import (
	"context"

	"github.com/rew3/rew3-pkg/core/service/grpc/client"
	"github.com/rew3/rew3-pkg/core/service/grpc/payload"
	"github.com/rew3/rew3-pkg/core/service/shared/request"
)

/**
 * THIS IS GENERATED CODES. 
 * DO NOT MODIFY. ANY CHANGES WILL BE REPLACED.
 * 
 * Version: {{.Version}}
 * Generated Date: {{.CurrentDate}}
 */ 
{{ $entity := .Entity }}
// GRPC Client API for {{$entity}}
type {{$entity}}ClientAPI struct {
    Client *client.Client
}
{{ "" }}
{{- range .ServiceReadAPIs}}
/**
 * Client Read API: {{.APIName}}
 */
func (api *{{$entity}}ClientAPI) {{.MethodName}}(ctx context.Context, rCtx request.RequestContext, input interface{}) payload.ResponsePayload {
    jsonData, err := payload.ToJson[interface{}](input)
    if err != nil {
        return payload.InvalidRequestResponsePayload("{{.APIName}}", err.Error())
    }
    requestPayload := payload.RequestPayload{API: "{{.APIName}}", Context: rCtx, Data: jsonData}
    response := api.Client.ExecuteRequest(ctx, requestPayload)
    return response
}
{{ "" }}
{{- end }}

{{- range .ServiceWriteAPIs}}
/**
 * Client Write API: {{.APIName}}
 */
func (api *{{$entity}}ClientAPI) {{.MethodName}}(ctx context.Context, rCtx request.RequestContext, input interface{}) payload.ResponsePayload {
    jsonData, err := payload.ToJson[interface{}](input)
    if err != nil {
        return payload.InvalidRequestResponsePayload("{{.APIName}}", err.Error())
    }
    requestPayload := payload.RequestPayload{API: "{{.APIName}}", Context: rCtx, Data: jsonData}
    response := api.Client.ExecuteRequest(ctx, requestPayload)
    return response
}
{{ "" }}
{{- end }}

